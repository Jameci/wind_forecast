# 5.17

原先的模型出了一些问题，它的输入和输出没有错开——相当于用今天预测今天了

现在的mape已经到0.4了，很恐怖啊，相当于没做

尝试着增加了lstm的长度，现在是5天的480个点预测下一天的96个点，发现不太行还是0.4

放弃了那种用一天预测一天，或者用几天预测一天的方法，改成用几个点预测一个点，mape降到了0.14，但出现了明显的时滞问题

# 5.18

## 差分

昨晚试着在那个社群里提了问题，得到的答复都是做差分，或者是做差分和原数据的百分比

但没用，差分做出来的预测输出基本在0左右，实际值则一直在波动

感觉可能是lstm无法胜任这一工作

## 平稳性分析

去查找了一些关于平稳性检测的内容，发现其实平稳性不是可预测的充要条件，主要是一些统计方法如ARIMA和ARMA性能在平稳预测中效果较好，所以用统计学方法的人会在拿到时间序列之后去检验一下，如果不是平稳的就要做差分了

对于非平稳的序列来说，统计学模型不好处理(如趋势，周期)

那就先试着加一个emd分解，如果没有改善就尝试找一些辅助数据吧

## EMD

老样子，emd一点用都没有，就是在原有的误差上增加了一些新误差

## 最后的改进

预测窗口没有办法调大了，window一直保持在1是最好的，只要调大一点就会引起准确率的急剧下滑

baseline大概在0.8954左右，虽然也不多，但是足以构成难以翻越的难关了

现在的思路有：

1.换模型，这次基本上充分证明了裸的lstm是无法胜任时序预测的，可用的有tft，nbeats，加入attention和还有一些之前读过的模型等等

2.增加数据，加入温度气压等辅助数据

# 5.19

属实难受，想了一下觉得还是加点数据上去，因为之前使用tft模型也没得到很好的效果，猜测很有可能是信息量不够

去ear5

## 尝试era5的数据

### 温度和读入

#### wgrib读入

wgrib的数据属实让我大伤脑筋

直接wgrib [文件名] 会出现

1:0:d=22010100:2D:kpds5=168:kpds6=1:kpds7=0:TR=0:P1=0:P2=0:TimeU=1:sfc:anl:type=analysis:NAve=0

第一个数字代表记录索引，可以看到它是逐个递增的

第二个数字是位置

第三个数字是时间，这里的就是2022年1月1日0点

第四个是land/sea，这里的2D没看懂，后面估计也用不上，就不看了

https://ftp.cpc.ncep.noaa.gov/wd51we/wgrib/readme

还有一种比较友好的文件描述方法wgrib 文件名 -V -ncep_rean

#### anaconda
